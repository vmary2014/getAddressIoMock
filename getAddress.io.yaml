openapi: 3.0.2
info:
  version: v1
  title: api.getaddress.io
  description: A simple API for finding postal addresses
  termsOfService: https://getaddress.io/terms
  contact:
    name: Support
    url: https://getaddress.io
    email: support@getaddress.io
paths:
  "/autocomplete/{postcode}":
    get:
      tags:
        - Autocomplete
      operationId: AutocompletePostalAddress
      summary: Autocompletes the postcode lookup
      parameters:
        - examples:
            EH106SS:
              value: EH106SS
        - name: postcode
          in: path
          required: true
          schema:
            type: string
        # - name: nameOrHouseNumber
        #   in: query
        #   required: false
        #   schema:
        #     type: string
        # - name: format
        #   in: query
        #   required: false
        #   schema:
        #     type: boolean
        # - name: sort
        #   in: query
        #   required: false
        #   schema:
        #     type: boolean
      responses:
        "200":
          description: Returns postal addresses
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PostalAddressModel"
            examples:
              EH106SS:
                value:
                  - text: 8 Caiystane Drive, Edinburgh
                    value: NzJlYzM1MzU4MTY1NTc4IDE5ODcyNDA4IGM2ODc3MzMwZDEyMWI3MQ==
                  - text: 9 Caiystane Drive, Edinburgh
                    value: MzRjYWY0ZmM3YjFiMWFlIDE5ODcyNDEyIGM2ODc3MzMwZDEyMWI3MQ==
                  - text: 10 Caiystane Drive, Edinburgh
                    value: ZDhkYmUzYWJkMDY0ZmVmIDE5ODcyNDE3IGM2ODc3MzMwZDEyMWI3MQ==
                  - text: 11 Caiystane Drive, Edinburgh
                    value: YjE4ZWM1OTIwNjBmMDc3IDE5ODcyNDIxIGM2ODc3MzMwZDEyMWI3MQ==
                  - text: 13 Caiystane Drive, Edinburgh
                    value: M2ZhNzAxYTM3NzRkMjhlIDE5ODcyNDI1IGM2ODc3MzMwZDEyMWI3MQ==
                  - text: 15 Caiystane Drive, Edinburgh
                    value: ZjgxNmI1N2YxNGViMTNjIDE5ODcyNDI5IGM2ODc3MzMwZDEyMWI3MQ==
        "400":
          description: Bad Request
        "401":
          description: "Unauthorized: Your admin key cannot be used for this resource"
        "403":
          description: Forbidden
        "404":
          description: NotFound
        "429":
          description: Too many requests
      # security:
      #   - api-key: []
  "/find/{postcode}":
    get:
      tags:
        - Find
      operationId: FindPostalAddress
      parameters:
        - name: postcode
          in: path
          required: true
          schema:
            type: string
        - name: nameOrHouseNumber
          in: query
          required: false
          schema:
            type: string
        - name: format
          in: query
          required: false
          schema:
            type: boolean
        - name: sort
          in: query
          required: false
          schema:
            type: boolean
      responses:
        "200":
          description: Returns postal addresses
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PostalAddressModel"
        "400":
          description: Bad Request
        "401":
          description: "Unauthorized: Your admin key cannot be used for this resource"
        "403":
          description: Forbidden
        "404":
          description: NotFound
        "429":
          description: Too many requests
      # security:
      #   - api-key: []
  "/find/{postcode}/{nameOrHouseNumber}":
    get:
      tags:
        - Find
      operationId: PostalAddress_GetV3_2
      parameters:
        - name: postcode
          in: path
          required: true
          schema:
            type: string
        - name: nameOrHouseNumber
          in: path
          required: true
          schema:
            type: string
        - name: format
          in: query
          required: false
          schema:
            type: boolean
        - name: sort
          in: query
          required: false
          schema:
            type: boolean
      responses:
        "200":
          description: Returns postal addresses
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PostalAddressModel"
        "400":
          description: BadRequest
        "401":
          description: "Unauthorized: Your admin key cannot be used for this resource"
        "403":
          description: Forbidden
        "404":
          description: NotFound
        "429":
          description: Too many requests
      # security:
      #   - api-key: []
components:
  securitySchemes:
    admin-key:
      type: apiKey
      description: Administration API Key
      name: api-key
      in: query
    api-key:
      type: apiKey
      description: API Key
      name: api-key
      in: query
  schemas:
    AllowedDomainAddRequest:
      type: object
      properties:
        name:
          type: string
    MessageAndId:
      type: object
      properties:
        id:
          type: string
        message:
          type: string
    AllowedDomainResponse:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
    MessageOnly:
      type: object
      properties:
        message:
          type: string
    AllowedIpAddressAddRequest:
      type: object
      properties:
        value:
          type: string
    AllowedIpResponse:
      type: object
      properties:
        id:
          type: string
        value:
          type: string
    WebhookAddRequest:
      required:
        - url
      type: object
      properties:
        url:
          type: string
    WebhookResponse:
      type: object
      properties:
        id:
          type: string
        url:
          type: string
    PostalAddressModel:
      type: object
      properties:
        Latitude:
          format: double
          type: number
        Longitude:
          format: double
          type: number
        Addresses:
          type: array
          items:
            type: string
    AddCustomerAddressRequest:
      type: object
      properties:
        id:
          type: string
        line1:
          type: string
        line2:
          type: string
        line3:
          type: string
        line4:
          type: string
        locality:
          type: string
        townOrcity:
          type: string
        county:
          type: string
    CustomerAddressesResponse:
      type: object
      properties:
        addresses:
          type: array
          items:
            $ref: "#/components/schemas/CustomerAddressResponse"
    CustomerAddressResponse:
      type: object
      properties:
        id:
          type: string
        line1:
          type: string
        line2:
          type: string
        line3:
          type: string
        line4:
          type: string
        locality:
          type: string
        townOrcity:
          type: string
        county:
          type: string
    Usage2:
      type: object
      properties:
        count:
          format: int64
          type: integer
        limit1:
          format: int32
          type: integer
        limit2:
          format: int32
          type: integer
